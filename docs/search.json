[
  {
    "objectID": "cdcdata-exercise/cdcdata-exercise.html",
    "href": "cdcdata-exercise/cdcdata-exercise.html",
    "title": "Data Analysis Exercise: Exploring flu vaccination coverage in U.S. adults (2020–21)",
    "section": "",
    "text": "This dataset comes from the CDC’s Cumulative Influenza Vaccination Coverage for Adults 18 years and older in the United States during the 2020-21 flu season.\nYou can find the original CDC dataset here.\nThe surveys were done using two large national panels: the IPSOS KnowledgePanel Omnibus and the NORC AmeriSpeak Omnibus.Each row in the dataset gives us information like when the data was collected, what age or race/ethnicity group it refers to, what percent of adults said they had gotten a flu shot (the point estimate), and the confidence interval (range of uncertainty). It also shows the sample size corresponding to how many people responded that week in that group.\nLoad and process data:\nBesides trimming the dataset to keep only the relevant columns, I also had to fix two issues. First, the Data_Collection_Midpoint_date column included unnecessary time information. Since all records for a given period already shared the same time, I formatted this column to display only the year and month (“2021 Jan”). Second, the Sample_Size column had a value labeled as “&lt;30”, which made the variable non-numeric and broke summary calculations. To fix this, I converted all “&lt;30” values to “30” so the column could be treated as a continuous numeric variable.\n\nlibrary(tidyverse)\n\nWarning: package 'ggplot2' was built under R version 4.3.3\n\n\nWarning: package 'readr' was built under R version 4.3.2\n\n\nWarning: package 'purrr' was built under R version 4.3.2\n\n\nWarning: package 'dplyr' was built under R version 4.3.2\n\n\nWarning: package 'stringr' was built under R version 4.3.2\n\n\nWarning: package 'lubridate' was built under R version 4.3.2\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(readr)\nlibrary(lubridate)\nlibrary(here)\n\nhere() starts at C:/Users/saj12401/OneDrive - University of Georgia/Documents/GitHub/AyllaErmland-portfolio\n\n#Load the data\nflu_data &lt;- read_csv(here(\"cdcdata-exercise\", \"Cumulative_Influenza_Vaccination_Coverage_20260210.csv\"))\n\nRows: 140 Columns: 18\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): Data_Collection_Start_Date, Data_Collection_End_Date, Data_Collecti...\ndbl (8): Data_Collection_Midpoint_MMWR_Week, Data_Collection_Midpoint_MMWR_D...\nnum (1): Data_Collection_Midpoint_MMWR_Year\nlgl (1): Suppressed\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#Show all column names (optional)\ncolnames(flu_data)\n\n [1] \"Data_Collection_Start_Date\"                     \n [2] \"Data_Collection_End_Date\"                       \n [3] \"Data_Collection_Midpoint_date\"                  \n [4] \"Data_Collection_Midpoint_MMWR_Year\"             \n [5] \"Data_Collection_Midpoint_MMWR_Week\"             \n [6] \"Data_Collection_Midpoint_MMWR_Day\"              \n [7] \"Data_Collection_Midpoint_MMWRWeek_Display_Order\"\n [8] \"Month_Abbrev\"                                   \n [9] \"Month_Sort_Order\"                               \n[10] \"Data_Source\"                                    \n[11] \"Suppressed\"                                     \n[12] \"Race_Ethnicity\"                                 \n[13] \"Age_Group\"                                      \n[14] \"Point_Estimate\"                                 \n[15] \"CI_HalfWidth\"                                   \n[16] \"CI_Lower\"                                       \n[17] \"CI_Upper\"                                       \n[18] \"Sample_Size\"                                    \n\n#Select and clean columns\nflu_trimmed &lt;- flu_data %&gt;%\n  select(\n    Data_Collection_Midpoint_date,\n    Race_Ethnicity,\n    Age_Group,\n    Point_Estimate,\n    CI_Lower,\n    CI_Upper,\n    Sample_Size\n  ) %&gt;%\n  mutate(\n    #Format the date: \"2020 Dec 19 12:00:00 AM\" → \"2020 Dec\"\n    Data_Collection_Midpoint_date = format(\n      parse_date_time(Data_Collection_Midpoint_date, orders = \"Y b d I:M:S p\"),\n      \"%Y %b\"\n    ),\n    \n    #Clean Sample_Size: remove \"&lt;\" if present, then convert to numeric\n    Sample_Size = as.numeric(gsub(\"&lt;\", \"\", Sample_Size))\n  )\n\n#Save processed dataset\nwrite_csv(flu_trimmed, here(\"cdcdata-exercise\", \"flu_trimmed_dataset.csv\"))\n\nExploring the data:\n1st variable: Estimating frequencies of Age_Group variable:\n\n#Creating a summary table for Age_Group:\n#This counts how many rows belong to each unique age group\nage_summary &lt;- flu_trimmed %&gt;%\n  group_by(Age_Group) %&gt;%          #Group the data by Age_Group\n  summarise(\n    count = n()                    #Count how many rows in each group\n  ) %&gt;%\n  mutate(\n    percent = round(100 * count / sum(count), 1)  #Calculate the percentage each group represents (rounded to 1 decimal)\n  )\n\n#Print the summary table\nage_summary\n\n# A tibble: 4 × 3\n  Age_Group        count percent\n  &lt;chr&gt;            &lt;int&gt;   &lt;dbl&gt;\n1 18-49               35      25\n2 50-64               35      25\n3 65+                 35      25\n4 All Adults (18+)    35      25\n\n#Bar plot showing the percentage for each age group\nggplot(age_summary, aes(x = reorder(Age_Group, -percent), y = percent)) +  \n  geom_col(fill = \"lightblue\") +  \n  labs(\n    title = \"Distribution of Records by Age Group\",  \n    x = \"Age Group\",                                 \n    y = \"Percentage (%)\"                            \n  )\n\n\n\n\n\n\n\n\nEstimating frequencies for the 2nd variable race_ethnicity:\n\n#Creating a summary table for Race_Ethnicity:\n#calculates how many records fall under each racial/ethnic group and what % that is\n\nrace_summary &lt;- flu_trimmed %&gt;%\n  group_by(Race_Ethnicity) %&gt;%     \n  summarise(\n    count = n()                    #Count the number of records (rows) in each group\n  ) %&gt;%\n  mutate(\n    percent = round(100 * count / sum(count), 1)  #Calculate what % of the total each group represents\n  )\n\nrace_summary\n\n# A tibble: 5 × 3\n  Race_Ethnicity      count percent\n  &lt;chr&gt;               &lt;int&gt;   &lt;dbl&gt;\n1 Black, Non-Hispanic    28      20\n2 Hispanic               28      20\n3 Other, Non-Hispanic    28      20\n4 Overall                28      20\n5 White, Non-Hispanic    28      20\n\n#Bar chart of the percentage of records by Race_Ethnicity\nggplot(race_summary, aes(x = reorder(Race_Ethnicity, -percent), y = percent)) +\n  geom_col(fill = \"lightpink\") +  #Use a bar chart (column plot) with coral color\n  labs(\n    title = \"Distribution of records by race/ethnicity\",  \n    x = \"Race/ethnicity\",                                 \n    y = \"Percentage (%)\"                                  \n  ) +\n  coord_flip()  #Flip coordinates so bars are horizontal\n\n\n\n\n\n\n\n\n3rd Variable:\nFor the continuous variable of vaccination coverage, I will plot a distribution and calculate the mean and SD of this dataset.\n\n# Summary statistics\ncoverage_stats &lt;- flu_trimmed %&gt;%\n  summarise(\n    mean_coverage = mean(Point_Estimate, na.rm = TRUE),\n    sd_coverage = sd(Point_Estimate, na.rm = TRUE)\n  )\n\ncoverage_stats\n\n# A tibble: 1 × 2\n  mean_coverage sd_coverage\n          &lt;dbl&gt;       &lt;dbl&gt;\n1          53.1        12.5\n\n# Histogram with normal curve (updated syntax)\nggplot(flu_trimmed, aes(x = Point_Estimate)) +\n  geom_histogram(aes(y = after_stat(density)), bins = 25, fill = \"black\", color = \"black\", na.rm = TRUE) +\n  #Add a normal distribution curve using the mean and SD from the data:\n  stat_function(\n    fun = dnorm,\n    args = list(\n      mean = mean(flu_trimmed$Point_Estimate, na.rm = TRUE),\n      sd = sd(flu_trimmed$Point_Estimate, na.rm = TRUE)\n    ),\n    color = \"red\"\n  ) +\n  labs(\n    title = \"Vaccination coverage\",\n    x = \"Coverage (%)\",\n    y = \"Density\"\n  )\n\n\n\n\n\n\n\n\n4th variable: Data_Collection_Midpoint_date\n::: {.cell}\n# Calculate percentage of records per month\ndate_counts &lt;- flu_trimmed %&gt;%\n group_by(Data_Collection_Midpoint_date) %&gt;%\n summarise(records = n()) %&gt;%\n mutate(percent = round(100 * records / sum(records), 1))\n\nhead(date_counts)  # Preview table\n::: {.cell-output .cell-output-stdout}\n# A tibble: 3 × 3\n  Data_Collection_Midpoint_date records percent\n  &lt;chr&gt;                           &lt;int&gt;   &lt;dbl&gt;\n1 2020 Dec                           40    28.6\n2 2021 Feb                           20    14.3\n3 2021 Jan                           80    57.1\n:::\n# Bar plot showing percentage of records per month\nggplot(date_counts, aes(x = Data_Collection_Midpoint_date, y = percent)) +\n geom_col(fill = \"black\") +\n labs(\n   title = \"Percentage of records by month and year\",\n   x = \"Month/Year\",\n   y = \"Percentage (%)\"\n ) +\n theme(axis.text.x = element_text(angle = 45, hjust = 1))\n::: {.cell-output-display}  ::: :::\n5th variable: Sample size\n\n#Calculate mean and standard deviation for Sample_Size\nsample_size_stats &lt;- flu_trimmed %&gt;%\n  summarise(\n    mean_sample_size = mean(Sample_Size, na.rm = TRUE),\n    sd_sample_size = sd(Sample_Size, na.rm = TRUE)\n  )\n\nsample_size_stats\n\n# A tibble: 1 × 2\n  mean_sample_size sd_sample_size\n             &lt;dbl&gt;          &lt;dbl&gt;\n1             203.           249.\n\n# Histogram to check distribution\nggplot(flu_trimmed, aes(x = Sample_Size)) +\n  geom_histogram(bins = 25, fill = \"black\", color = \"white\") +\n  labs(\n    title = \"Distribution of Sample Size\",\n    x = \"Sample Size\",\n    y = \"Count\"\n  )\n\n\n\n\n\n\n\n\nThis section is contributed by: Emil Joson"
  }
]